<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic OTP Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
        }

        .login-container {
            display: flex;
            min-height: 80vh;
            width: 90%;
            max-width: 1200px;
            margin: 50px auto;
            background-color: #fff;
            flex-wrap: wrap;
        }

        .left-panel {
            color: white;
            padding: 40px;
            flex: 1 1 40%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s ease;
        }

        .left-panel img {
            max-width: 80%;
            margin-top: 30px;
        }

        .right-panel {
            flex: 1 1 60%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .form-box {
            width: 100%;
            max-width: 400px;
        }

        .form-control {
            border: none;
            border-bottom: 1px solid #ccc;
            border-radius: 0;
            background-color: transparent;
        }

        .form-control:focus {
            box-shadow: none;
            border-bottom: 2px solid #2874f0;
        }

        .request-btn,
        .verify-btn,
        .resend-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to left, #465ea1 50%, #96acdd 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            color: white;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            transition: background-position 0.4s ease-out, background 0.4s ease-in-out;
        }

        .request-btn:hover,
        .verify-btn:hover,
        .resend-btn:hover {
            background-position: left bottom;
            /* background: linear-gradient(to left, #ff6200 50%, #2874f0 50%); */
        }

        /* .request-btn,
        .verify-btn,
        .resend-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to left, #2874f0 50%, #ff6200 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            color: white;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            transition: background-position 0.4s ease-out;
        }

        .request-btn:hover,
        .verify-btn:hover,
        .resend-btn:hover {
            background-position: left bottom;
        } */

        .otp-box {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }

        .otp-box input {
            width: 40px;
            font-size: 18px;
            border: none;
            border-bottom: 2px solid #ccc;
            text-align: center;
            outline: none;
            background: transparent;
            transition: border-color 0.3s ease;
        }

        .otp-box input:focus {
            border-bottom: 2px solid #2874f0;
        }

        .resend-text {
            text-align: center;
            margin-top: 15px;
            color: gray;
        }

        .success-message {
            text-align: center;
        }

        @media (max-width: 768px) {
            .login-container {
                flex-direction: column;
            }

            .left-panel,
            .right-panel {
                flex: 1 1 100%;
                width: 100%;
            }

            .left-panel {
                min-height: 250px;
            }
        }
    </style>
</head>

<body>
    <div class="container-fluid login-container">
        <!-- Left Panel -->
        <div class="left-panel text-center" id="leftPanel" style="background-color: #465ea1;">
            <h2 class="fw-bold" id="leftTitle">Login</h2>
            <p id="leftText">Get access to your Orders,<br />Wishlist and Recommendations</p>
            <img id="leftImage"
                src="https://img.freepik.com/free-vector/access-control-system-abstract-concept_335657-3180.jpg"
                alt="Login Illustration" />
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="form-box">

                <!-- Phone Number Form -->
                <div id="phoneForm">
                    <div class="mb-3">
                        <label for="phoneInput" class="form-label fw-semibold">Enter Mobile Number</label>
                        <div class="input-group">
                            <span class="input-group-text bg-transparent border-0">+91</span>
                            <input type="text" class="form-control" id="phoneInput" placeholder="10-digit number"
                                required maxlength="10">
                        </div>
                        <div class="mb-3 text-muted mt-4" style="font-size: 0.9rem;">
                            By continuing, you agree to Creative Copsâ€™s
                            <a href="#">Terms of Use</a> and
                            <a href="#">Privacy Policy</a>.
                        </div>
                    </div>

                    <button class="btn request-btn" onclick="sendOTP()">Request OTP</button>
                </div>

                <!-- OTP Form -->
                <div id="otpForm" style="display: none;">
                    <p class="mb-1">Please enter the OTP sent to</p>
                    <h6 class="fw-semibold mb-4" id="phoneDisplay">+91 <a href="#">Change</a></h6>

                    <div class="otp-box">
                        <input type="text" maxlength="1" id="otp1" />
                        <input type="text" maxlength="1" id="otp2" />
                        <input type="text" maxlength="1" id="otp3" />
                        <input type="text" maxlength="1" id="otp4" />
                    </div>

                    <button class="btn verify-btn" onclick="verifyOTP()">Verify</button>

                    <div class="resend-text">
                        Not received your code? <span id="timer">00:30</span>
                    </div>

                    <button class="btn resend-btn mt-3" onclick="resendOTP()" id="resendBtn"
                        style="display: none;">Resend OTP</button>
                </div>

                <!-- Success Message -->
                <div id="successMessage" class="success-message" style="display: none;">
                    <h4 class="text-success">Login Successful!</h4>
                    <p>Welcome, <span id="userNumber">+91</span></p>
                    <p class="text-muted" id="redirectTimerText">You will be redirected in 60 seconds...</p>

                </div>

            </div>
        </div>
    </div>

    <script>
        let countdown;
        let timerDuration = 20; // seconds

        function sendOTP() {
            const phone = document.getElementById("phoneInput").value.trim();
            if (!/^\d{10}$/.test(phone)) {
                alert("Please enter a valid 10-digit mobile number.");
                return;
            }

            sessionStorage.setItem("userPhone", phone);
            document.getElementById("phoneDisplay").textContent = "+91 " + phone;

            document.getElementById("phoneForm").style.display = "none";
            document.getElementById("otpForm").style.display = "block";

            document.getElementById("leftTitle").textContent = "OTP Process";
            document.getElementById("leftPanel").style.backgroundColor = "#1a5bb8";
            document.getElementById("leftImage").src = "https://cdn-icons-png.flaticon.com/512/483/483408.png";

            startTimer();
        }

        function startTimer() {
            let timeLeft = timerDuration;
            document.getElementById("timer").textContent = `00:${String(timeLeft).padStart(2, "0")}`;
            document.getElementById("resendBtn").style.display = "none";

            countdown = setInterval(() => {
                timeLeft--;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    document.getElementById("timer").textContent = "00:00";
                    alert("Time out! Please request OTP again.");
                    document.getElementById("otpForm").style.display = "none";
                    document.getElementById("phoneForm").style.display = "block";
                    document.getElementById("leftTitle").textContent = "Login";
                    document.getElementById("leftPanel").style.backgroundColor = "#2874f0";
                    document.getElementById("leftImage").src = "https://img.freepik.com/free-vector/access-control-system-abstract-concept_335657-3180.jpg";
                } else {
                    document.getElementById("timer").textContent = `00:${String(timeLeft).padStart(2, "0")}`;
                }

                if (timeLeft === 0) {
                    document.getElementById("resendBtn").style.display = "block";
                }
            }, 1000);
        }

        function verifyOTP() {
            const otp = [otp1.value, otp2.value, otp3.value, otp4.value].join("");

            if (!/^\d{4}$/.test(otp)) {
                alert("Wrong password. Please enter correct 4-digit OTP.");
                return;
            }

            clearInterval(countdown);

            document.getElementById("otpForm").style.display = "none";
            document.getElementById("successMessage").style.display = "block";
            document.getElementById("userNumber").textContent = "+91 " + sessionStorage.getItem("userPhone");

            document.getElementById("leftTitle").textContent = "Successfully";
            document.getElementById("leftPanel").style.backgroundColor = "#28a745";
            document.getElementById("leftImage").src = "https://cdn-icons-png.flaticon.com/512/845/845646.png";

            // Redirect after 1 minute
            let redirectSeconds = 10;
            const redirectInterval = setInterval(() => {
                redirectSeconds--;
                document.getElementById("redirectTimerText").textContent = `You will be redirected in ${redirectSeconds} seconds...`;
                if (redirectSeconds === 0) {
                    clearInterval(redirectInterval);
                    document.getElementById("redirectTimerText").textContent = "Redirecting now...";
                    window.location.href = "Myaccount.html";
                }
            }, 60);

        }

        function resendOTP() {
            alert("OTP Resent!");
            startTimer();
            document.getElementById("resendBtn").style.display = "none";
        }
    </script>
</body>

</html>